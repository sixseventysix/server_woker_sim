
running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s


running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s


running 8 tests
test test_complex_task_interactions ... [req:0] [ServerThread] Sending create task to worker for Task 0
[req:1] [ServerThread] Sending create task to worker for Task 1
[req:2] [ServerThread] Sending create task to worker for Task 2
[req:3] [ServerThread] Sending create task to worker for Task 3
[req:0] [WorkerThread] Initializing task thread for Task 0
[req:1] [WorkerThread] Initializing task thread for Task 1
[Task 0] Waiting for control message...
[req:2] [WorkerThread] Initializing task thread for Task 2
[Task 1] Waiting for control message...
[req:3] [WorkerThread] Initializing task thread for Task 3
[Task 2] Waiting for control message...
[Task 0] Received control message: Query { req_id: 4, query_id: "get_status", result_tx: Sender { .. } }
[Task 1] Received control message: Update { req_id: 5, update_id: "mark_done", result_tx: Sender { .. } }
[Task 3] Waiting for control message...
[Task 0] Waiting for control message...
[Task 0] Received control message: Query { req_id: 7, query_id: "invalid_query", result_tx: Sender { .. } }
[Task 0] Waiting for control message...
[Task 0] Received control message: Query { req_id: 9, query_id: "get_status", result_tx: Sender { .. } }
[Task 0] Waiting for control message...
[Task 1] Running update function
[Task 1] Marked done
[Task 1] Waiting for control message...
[Task 1] Received control message: Update { req_id: 10, update_id: "mark_done", result_tx: Sender { .. } }
[Task 2] Received control message: Query { req_id: 6, query_id: "get_status", result_tx: Sender { .. } }
[Task 2] Waiting for control message...
[Task 2] Received control message: Query { req_id: 11, query_id: "get_status", result_tx: Sender { .. } }
[Task 2] Waiting for control message...
[req:4] Query result for task 0: idle_0
[req:7] Query failed for task 0: Query ID 'invalid_query' not found
[Task 1] Running update function
[Task 1] Marked done
[Task 1] Waiting for control message...
[Task 3] Received control message: Update { req_id: 8, update_id: "invalid_update", result_tx: Sender { .. } }
[Task 3] Waiting for control message...
[Task 3] Received control message: Update { req_id: 12, update_id: "mark_done", result_tx: Sender { .. } }
[Task 3] Running update function
[Task 3] Marked done
[Task 3] Waiting for control message...
[req:9] Query result for task 0: idle_0
[req:5] Update OK for task 1
[Task 1] Received control message: Query { req_id: 13, query_id: "get_status", result_tx: Sender { .. } }
[Task 1] Waiting for control message...
[req:6] Query result for task 2: idle_2
[req:11] Query result for task 2: idle_2
[req:10] Update OK for task 1
[req:8] Update failed for task 3: Update ID 'invalid_update' not found
[req:12] Update OK for task 3
[req:13] Query result for task 1: idle_1
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[Task 0] No control message received for 2s. Exiting due to inactivity.
[Task 0] Task loop terminated.
[Task 1] No control message received for 2s. Exiting due to inactivity.
[WorkerThread] Task 0 finished and removed.
[Task 2] No control message received for 2s. Exiting due to inactivity.
[Task 2] Task loop terminated.
[Task 1] Task loop terminated.
[WorkerThread] Task 2 finished and removed.
[Task 3] No control message received for 2s. Exiting due to inactivity.
[Task 3] Task loop terminated.
[WorkerThread] Task 1 finished and removed.
[WorkerThread] Task 3 finished and removed.
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[Listener] No activity. Shutting down...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] Shutdown flag detected. Worker exiting.
ok
test test_queried_task_w_throttled_tasks ... [req:0] [ServerThread] Sending create task to worker for Task 0
[req:1] [ServerThread] Sending create task to worker for Task 1
[req:0] [WorkerThread] Initializing task thread for Task 0
[req:2] [ServerThread] Sending create task to worker for Task 2
[req:1] [WorkerThread] Initializing task thread for Task 1
[req:3] [ServerThread] Sending create task to worker for Task 3
[req:2] [WorkerThread] Initializing task thread for Task 2
[Task 1] Waiting for control message...
[Task 0] Waiting for control message...
[req:4] [ServerThread] Sending create task to worker for Task 4
[req:5] [ServerThread] Sending create task to worker for Task 5
[Task 2] Waiting for control message...
[req:3] [WorkerThread] Initializing task thread for Task 3
ok
test test_query_missing_key_in_task ... [Task 3] Waiting for control message...
[req:4] [WorkerThread] Task 4 rejected due to throttling
[req:5] [WorkerThread] Task 5 rejected due to throttling
[req:4] Creation for task 4 failed: WorkerThread is throttled
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[Task 0] Received control message: Query { req_id: 6, query_id: "get_status", result_tx: Sender { .. } }
[Task 0] Waiting for control message...
[Task 0] Received control message: Query { req_id: 9, query_id: "invalid_query", result_tx: Sender { .. } }
[Task 0] Waiting for control message...
[req:5] Creation for task 5 failed: WorkerThread is throttled
[req:6] Query result for task 0: idle
[Task 2] Received control message: Query { req_id: 8, query_id: "get_status", result_tx: Sender { .. } }
[Task 2] Waiting for control message...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[req:9] Query failed for task 0: Query ID 'invalid_query' not found
[req:8] Query result for task 2: idle
[Task 1] Received control message: Update { req_id: 7, update_id: "mark_done", result_tx: Sender { .. } }
[Task 1] Running update function
Marked done
[Task 1] Waiting for control message...
[req:7] Update OK for task 1
[Listener] Channel disconnected. Shutting down...
[req:0] [ServerThread] Sending create task to worker for Task 0
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] Shutdown flag detected. Worker exiting.
[req:0] [WorkerThread] Initializing task thread for Task 0
ok
test test_query_nonexistent_task ... [Task 0] Waiting for control message...
[Task 0] Received control message: Query { req_id: 1, query_id: "nonexistent_key", result_tx: Sender { .. } }
[Task 0] Waiting for control message...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[req:1] Query failed for task 0: Query ID 'nonexistent_key' not found
[Listener] Channel disconnected. Shutting down...
[req:0] Task 999 not found: Task not found for query
[Listener] Channel disconnected. Shutting down...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] Shutdown flag detected. Worker exiting.
ok
test test_simple_success ... [WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] Shutdown flag detected. Worker exiting.
[req:0] [ServerThread] Sending create task to worker for Task 0
[req:0] [WorkerThread] Initializing task thread for Task 0
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[Task 0] Waiting for control message...
[Task 0] Received control message: Query { req_id: 1, query_id: "status", result_tx: Sender { .. } }
ok[req:1] Query result for task 0: running
[Listener] Channel disconnected. Shutting down...

test test_task_throttling_behavior ... [Task 0] Waiting for control message...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] Shutdown flag detected. Worker exiting.
[req:0] [ServerThread] Sending create task to worker for Task 0
[req:1] [ServerThread] Sending create task to worker for Task 1
[req:0] [WorkerThread] Initializing task thread for Task 0
[req:2] [ServerThread] Sending create task to worker for Task 2
[req:1] [WorkerThread] Initializing task thread for Task 1
[Task 0] Waiting for control message...
[req:3] [ServerThread] Sending create task to worker for Task 3
[req:2] [WorkerThread] Initializing task thread for Task 2
[Task 1] Waiting for control message...
[req:4] [ServerThread] Sending create task to worker for Task 4
[Task 2] Waiting for control message...
[req:5] [ServerThread] Sending create task to worker for Task 5
[req:3] [WorkerThread] Initializing task thread for Task 3
ok
test test_update_missing_id_in_task ... [req:4] [WorkerThread] Task 4 rejected due to throttling
[Task 3] Waiting for control message...
[req:4] Creation for task 4 failed: WorkerThread is throttled
[req:5] [WorkerThread] Task 5 rejected due to throttling
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[req:0] [ServerThread] Sending create task to worker for Task 0
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
ok[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[req:0] [WorkerThread] Initializing task thread for Task 0
[req:5] Creation for task 5 failed: WorkerThread is throttled
[Listener] Channel disconnected. Shutting down...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] Shutdown flag detected. Worker exiting.

test test_update_nonexistent_task ... [Task 0] Waiting for control message...
[Task 0] Received control message: Update { req_id: 1, update_id: "bad_update_id", result_tx: Sender { .. } }
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[Task 0] Waiting for control message...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[req:1] Update failed for task 0: Update ID 'bad_update_id' not found
[Listener] Channel disconnected. Shutting down...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] Shutdown flag detected. Worker exiting.
[req:0] Task 888 not found: Task not found for update
[Listener] Channel disconnected. Shutting down...
ok
[WorkerThread] recv_timeout hit, checking shutdown flag again...
[WorkerThread] Shutdown flag detected. Worker exiting.

test result: ok. 8 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 5.00s


running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

